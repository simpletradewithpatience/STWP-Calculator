<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>STWP OI Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      padding: 40px;
      color: #333;
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    label, input, button, select {
      display: block;
      width: 100%;
      margin: 10px 0;
      font-size: 16px;
    }
    input, select {
      padding: 8px;
      box-sizing: border-box;
    }
    #result {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background: #f9f9f9;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>STWP OI Calculator</h2>

    <label for="symbol">Select Symbol:</label>
    <select id="symbol" onchange="updateStockName()">
      <option value="NIFTY">NIFTY</option>
      <option value="BANKNIFTY">BANKNIFTY</option>
      <option value="BAJFINANCE">BAJFINANCE</option>
      <option value="MARUTI">MARUTI</option>
      <option value="RELIANCE">RELIANCE</option>
      <option value="HDFCBANK">HDFCBANK</option>
    </select>

    <label for="prevPrice">Previous Price:</label>
    <input type="number" id="prevPrice" step="0.01" placeholder="e.g. 22000">

    <label for="currPrice">Current Price:</label>
    <input type="number" id="currPrice" step="0.01" placeholder="e.g. 22100">

    <label for="prevOI">Previous OI:</label>
    <input type="number" id="prevOI" step="1" placeholder="e.g. 150000">

    <label for="currOI">Current OI:</label>
    <input type="number" id="currOI" step="1" placeholder="e.g. 160000">

    <button onclick="analyzeTrade()">Analyze</button>

    <div id="result"></div>
  </div>

  <script>
    // Auto-fill stock name based on the selected symbol
    function updateStockName() {
      const symbol = document.getElementById('symbol').value;
      document.getElementById('stockName') = symbol;
    }

    // Trade analysis based on price and OI movement
    function analyzeTrade() {
      const stock = document.getElementById('symbol').value;
      const prevPrice = parseFloat(document.getElementById('prevPrice').value);
      const currPrice = parseFloat(document.getElementById('currPrice').value);
      const prevOI = parseFloat(document.getElementById('prevOI').value);
      const currOI = parseFloat(document.getElementById('currOI').value);
      const resultBox = document.getElementById('result');

      if (isNaN(prevPrice) || isNaN(currPrice) || isNaN(prevOI) || isNaN(currOI)) {
        resultBox.innerHTML = '❌ Please fill in all fields with valid numbers.';
        resultBox.style.backgroundColor = '#ffe6e6';
        resultBox.style.color = '#cc0000';
        return;
      }

      const priceDir = currPrice > prevPrice ? 'up' : 'down';
      const oiDir = currOI > prevOI ? 'up' : 'down';

      let setup = '', sentiment = '', suggestion = '';

      if (priceDir === 'up' && oiDir === 'up') {
        setup = 'Long Buildup';
        sentiment = 'Bullish';
        suggestion = 'Look for Longs';
      } else if (priceDir === 'down' && oiDir === 'up') {
        setup = 'Short Buildup';
        sentiment = 'Bearish';
        suggestion = 'Look for Shorts';
      } else if (priceDir === 'up' && oiDir === 'down') {
        setup = 'Short Covering';
        sentiment = 'Bullish';
        suggestion = 'Quick Longs Possible';
      } else if (priceDir === 'down' && oiDir === 'down') {
        setup = 'Long Unwinding';
        sentiment = 'Bearish';
        suggestion = 'Avoid Longs / Consider Shorts';
      }

      // Color code based on sentiment
      resultBox.style.backgroundColor = sentiment === 'Bullish' ? '#e6ffe6' : '#ffe6e6';
      resultBox.style.color = sentiment === 'Bullish' ? '#006600' : '#cc0000';

      resultBox.innerHTML = `
        ✅ <strong>Stock/Index:</strong> ${stock}<br>
        🔎 <strong>Setup:</strong> ${setup}<br>
        📈 <strong>Market Sentiment:</strong> ${sentiment}<br>
        💡 <strong>Suggestion:</strong> ${suggestion}
      `;
    }
  </script>
</body>
</html>
